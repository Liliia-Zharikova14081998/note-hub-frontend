module.exports=[14747,(a,b,c)=>{b.exports=a.x("path",()=>require("path"))},24361,(a,b,c)=>{b.exports=a.x("util",()=>require("util"))},50944,(a,b,c)=>{b.exports=a.r(74137)},70025,a=>{"use strict";a.s(["useMutation",()=>i],70025);var b=a.i(72131),c=a.i(12794),d=a.i(18544),e=a.i(33791),f=a.i(42871),g=class extends e.Subscribable{#a;#b=void 0;#c;#d;constructor(a,b){super(),this.#a=a,this.setOptions(b),this.bindMethods(),this.#e()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(a){let b=this.options;this.options=this.#a.defaultMutationOptions(a),(0,f.shallowEqualObjects)(this.options,b)||this.#a.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#c,observer:this}),b?.mutationKey&&this.options.mutationKey&&(0,f.hashKey)(b.mutationKey)!==(0,f.hashKey)(this.options.mutationKey)?this.reset():this.#c?.state.status==="pending"&&this.#c.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#c?.removeObserver(this)}onMutationUpdate(a){this.#e(),this.#f(a)}getCurrentResult(){return this.#b}reset(){this.#c?.removeObserver(this),this.#c=void 0,this.#e(),this.#f()}mutate(a,b){return this.#d=b,this.#c?.removeObserver(this),this.#c=this.#a.getMutationCache().build(this.#a,this.options),this.#c.addObserver(this),this.#c.execute(a)}#e(){let a=this.#c?.state??(0,c.getDefaultState)();this.#b={...a,isPending:"pending"===a.status,isSuccess:"success"===a.status,isError:"error"===a.status,isIdle:"idle"===a.status,mutate:this.mutate,reset:this.reset}}#f(a){d.notifyManager.batch(()=>{if(this.#d&&this.hasListeners()){let b=this.#b.variables,c=this.#b.context,d={client:this.#a,meta:this.options.meta,mutationKey:this.options.mutationKey};a?.type==="success"?(this.#d.onSuccess?.(a.data,b,c,d),this.#d.onSettled?.(a.data,null,b,c,d)):a?.type==="error"&&(this.#d.onError?.(a.error,b,c,d),this.#d.onSettled?.(void 0,a.error,b,c,d))}this.listeners.forEach(a=>{a(this.#b)})})}},h=a.i(37927);function i(a,c){let e=(0,h.useQueryClient)(c),[i]=b.useState(()=>new g(e,a));b.useEffect(()=>{i.setOptions(a)},[i,a]);let j=b.useSyncExternalStore(b.useCallback(a=>i.subscribe(d.notifyManager.batchCalls(a)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),k=b.useCallback((a,b)=>{i.mutate(a,b).catch(f.noop)},[i]);if(j.error&&(0,f.shouldThrowError)(i.options.throwOnError,[j.error]))throw j.error;return{...j,mutate:k,mutateAsync:j.mutate}}},74870,a=>{a.v({actions:"NoteForm-module__XA_SlW__actions",cancelButton:"NoteForm-module__XA_SlW__cancelButton",error:"NoteForm-module__XA_SlW__error",form:"NoteForm-module__XA_SlW__form",formGroup:"NoteForm-module__XA_SlW__formGroup",input:"NoteForm-module__XA_SlW__input",select:"NoteForm-module__XA_SlW__select",submitButton:"NoteForm-module__XA_SlW__submitButton",textarea:"NoteForm-module__XA_SlW__textarea"})},36429,a=>{"use strict";a.s(["default",()=>n],36429);var b=a.i(87924),c=a.i(74870),d=a.i(53250),e=a.i(38246),f=a.i(72131);let g=a=>{let b,c=new Set,d=(a,d)=>{let e="function"==typeof a?a(b):a;if(!Object.is(e,b)){let a=b;b=(null!=d?d:"object"!=typeof e||null===e)?e:Object.assign({},b,e),c.forEach(c=>c(b,a))}},e=()=>b,f={setState:d,getState:e,getInitialState:()=>g,subscribe:a=>(c.add(a),()=>c.delete(a))},g=b=a(d,e,f);return f},h=a=>{let b=(a=>a?g(a):g)(a),c=a=>(function(a,b=a=>a){let c=f.default.useSyncExternalStore(a.subscribe,f.default.useCallback(()=>b(a.getState()),[a,b]),f.default.useCallback(()=>b(a.getInitialState()),[a,b]));return f.default.useDebugValue(c),c})(b,a);return Object.assign(c,b),c},i=a=>b=>{try{let c=a(b);if(c instanceof Promise)return c;return{then:a=>i(a)(c),catch(a){return this}}}catch(a){return{then(a){return this},catch:b=>i(b)(a)}}},j={title:"",content:"",tag:""},k=h(((a,b)=>(c,d,e)=>{let f,g={storage:function(a,b){let c;try{c=a()}catch(a){return}return{getItem:a=>{var b;let d=a=>null===a?null:JSON.parse(a,void 0),e=null!=(b=c.getItem(a))?b:null;return e instanceof Promise?e.then(d):d(e)},setItem:(a,b)=>c.setItem(a,JSON.stringify(b,void 0)),removeItem:a=>c.removeItem(a)}}(()=>localStorage),partialize:a=>a,version:0,merge:(a,b)=>({...b,...a}),...b},h=!1,j=new Set,k=new Set,l=g.storage;if(!l)return a((...a)=>{console.warn(`[zustand persist middleware] Unable to update item '${g.name}', the given storage is currently unavailable.`),c(...a)},d,e);let m=()=>{let a=g.partialize({...d()});return l.setItem(g.name,{state:a,version:g.version})},n=e.setState;e.setState=(a,b)=>(n(a,b),m());let o=a((...a)=>(c(...a),m()),d,e);e.getInitialState=()=>o;let p=()=>{var a,b;if(!l)return;h=!1,j.forEach(a=>{var b;return a(null!=(b=d())?b:o)});let e=(null==(b=g.onRehydrateStorage)?void 0:b.call(g,null!=(a=d())?a:o))||void 0;return i(l.getItem.bind(l))(g.name).then(a=>{if(a)if("number"!=typeof a.version||a.version===g.version)return[!1,a.state];else{if(g.migrate){let b=g.migrate(a.state,a.version);return b instanceof Promise?b.then(a=>[!0,a]):[!0,b]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}return[!1,void 0]}).then(a=>{var b;let[e,h]=a;if(c(f=g.merge(h,null!=(b=d())?b:o),!0),e)return m()}).then(()=>{null==e||e(f,void 0),f=d(),h=!0,k.forEach(a=>a(f))}).catch(a=>{null==e||e(void 0,a)})};return e.persist={setOptions:a=>{g={...g,...a},a.storage&&(l=a.storage)},clearStorage:()=>{null==l||l.removeItem(g.name)},getOptions:()=>g,rehydrate:()=>p(),hasHydrated:()=>h,onHydrate:a=>(j.add(a),()=>{j.delete(a)}),onFinishHydration:a=>(k.add(a),()=>{k.delete(a)})},g.skipHydration||p(),f||o})(a=>({draft:j,setDraft:b=>a(()=>({draft:b})),clearDraft:()=>a(()=>({draft:j}))}),{name:"note-draft-storage",partialize:a=>({draft:a.draft})}));var l=a.i(70025),m=a.i(50944);function n(){let a=(0,m.useRouter)(),{draft:f,setDraft:g,clearDraft:h}=k(),i=a=>{g({...f,[a.target.name]:a.target.value})},j=(0,l.useMutation)({mutationFn:d.createNote,onSuccess:()=>{h(),a.back()}});return(0,b.jsxs)("form",{action:a=>{let b={title:a.get("title"),content:a.get("content"),tag:a.get("tag")||void 0};j.mutate(b)},className:c.default.form,children:[(0,b.jsxs)("div",{className:c.default.formGroup,children:[(0,b.jsx)("label",{htmlFor:"title",children:"Title"}),(0,b.jsx)("input",{id:"title",type:"text",name:"title",className:c.default.input,defaultValue:f.title,onChange:i,required:!0})]}),(0,b.jsxs)("div",{className:c.default.formGroup,children:[(0,b.jsx)("label",{htmlFor:"content",children:"Content"}),(0,b.jsx)("textarea",{id:"content",name:"content",className:c.default.textarea,rows:8,defaultValue:f.content,onChange:i,required:!0})]}),(0,b.jsxs)("div",{className:c.default.formGroup,children:[(0,b.jsx)("label",{htmlFor:"tag",children:"Tag"}),(0,b.jsxs)("select",{id:"tag",name:"tag",className:c.default.select,defaultValue:f.tag,onChange:i,required:!0,children:[(0,b.jsx)("option",{value:"",children:"Select a tag"}),(0,b.jsx)("option",{value:"Todo",children:"Todo"}),(0,b.jsx)("option",{value:"Work",children:"Work"}),(0,b.jsx)("option",{value:"Personal",children:"Personal"}),(0,b.jsx)("option",{value:"Meeting",children:"Meeting"}),(0,b.jsx)("option",{value:"Shoping",children:"Shoping"})]})]}),(0,b.jsxs)("div",{className:c.default.actions,children:[(0,b.jsx)(e.default,{href:"/notes/filter/All",onClick:()=>a.back(),className:c.default.cancelButton,children:"Cancel"}),(0,b.jsx)("button",{type:"submit",className:c.default.submitButton,disabled:j.isPending,children:j.isPending?"Creating...":"Create Note"})]}),j.isError&&(0,b.jsx)("p",{className:c.default.error,children:"Error creating note. Please try again."})]})}}];

//# sourceMappingURL=%5Broot-of-the-server%5D__c7b23985._.js.map